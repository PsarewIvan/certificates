{"version":3,"sources":["form.js","phoneInput.js","tabs.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.js","sourcesContent":["(() => {\n    const CLASS_HIDDEN = 'hidden';\n    const CLASS_SELECTED = 'selected';\n    const CLASS_CARD_INTERACTIVE = 'interactive';\n\n    const HEADER_TITLE = {\n        First: 'Выберите сертификат',\n        Second: 'Ваши данные',\n        Third: 'Оплата',\n        ThirdPayed: 'Спасибо за покупку',\n        Fourth: 'Дизайн и получатель',\n        Fives: 'Проверка данных',\n    };\n\n    const formState = {\n        currentStep: 1,\n        selectedCard: '',\n    };\n\n    const stateHandler = {\n        set(target, property, value) {\n            const prevValue = target[property];\n\n            if (property === 'currentStep') {\n                handleStepChange(value, prevValue, target);\n            }\n\n            if (property === 'selectedCard') {\n                handleSelectedCardChange(value, prevValue, target);\n            }\n\n            target[property] = value;\n\n            return true;\n        },\n    };\n\n    const observedState = new Proxy(formState, stateHandler);\n\n    const headerFirst = document.querySelector('.js-header-first');\n    const headerSecond = document.querySelector('.js-header-second');\n    const headerTitle = headerSecond?.querySelector('.js-header-title');\n    const backButton = headerSecond?.querySelector('.js-back-button');\n    const currentStep = headerSecond?.querySelector('.js-current-step');\n\n    const cards = document.querySelectorAll('.js-card');\n\n    cards.forEach((card) => {\n        card.addEventListener('click', handleCardClick);\n    });\n\n    backButton?.addEventListener('click', handleBackClick);\n\n    function handleCardClick(event) {\n        const card = event.currentTarget;\n\n        if (card.classList.contains(CLASS_CARD_INTERACTIVE)) {\n            const id = card.dataset.id;\n\n            observedState.selectedCard = id;\n            observedState.currentStep = 2;\n        }\n    }\n\n    function handleBackClick(event) {\n        observedState.currentStep -= 1;\n\n        if (observedState.currentStep === 1) {\n            observedState.selectedCard = '';\n        }\n    }\n\n    function handleStepChange(value, prevValue, target) {\n        console.log('[handleStepChange]', target);\n\n        if (currentStep) {\n            currentStep.innerHTML = `${value}`;\n        }\n\n        if (prevValue === 1) {\n            headerFirst?.classList.add(CLASS_HIDDEN);\n            headerSecond?.classList.add(CLASS_SELECTED);\n\n            cards.forEach((card) => {\n                if (card.dataset.id !== target.selectedCard) {\n                    card.classList.add(CLASS_HIDDEN);\n                }\n            });\n        }\n\n        if (prevValue === 2) {\n            cards.forEach((card) => {\n                card.classList.remove(CLASS_HIDDEN);\n            });\n        }\n\n        if (value === 1) {\n            headerFirst?.classList.remove(CLASS_HIDDEN);\n            headerSecond?.classList.remove(CLASS_SELECTED);\n\n            if (headerTitle) {\n                headerTitle.innerHTML = HEADER_TITLE.First;\n            }\n        }\n\n        if (value === 2) {\n            if (headerTitle) {\n                headerTitle.innerHTML = HEADER_TITLE.Second;\n            }\n        }\n    }\n\n    function handleSelectedCardChange(value, prevValue, target) {\n        cards.forEach((card) => {\n            if (value === '') {\n                card.classList.add(CLASS_CARD_INTERACTIVE);\n            } else {\n                card.classList.remove(CLASS_CARD_INTERACTIVE);\n            }\n        });\n    }\n})();\n","import IMask from 'imask';\n\n(() => {\n    console.log(IMask);\n\n    const inputs = document.querySelectorAll('.js-input[type=\"tel\"]');\n\n    inputs.forEach((input) => {\n        input.addEventListener('input', (e) => {\n            let value = e.target.value.replace(/\\D/g, ''); // Удаляем все нецифровые символы\n            const template = '+7 (___) ___-__-__';\n\n            let formattedValue = template;\n            for (let i = 0; i < value.length; i++) {\n                formattedValue = formattedValue.replace('_', value[i]);\n            }\n\n            e.target.value = formattedValue.replace(/_+/g, ''); // Удаляем лишние подчеркивания\n        });\n\n        input.addEventListener('blur', (e) => {\n            if (e.target.value.length < 18) {\n                e.target.value = ''; // Очищаем поле, если данные неполные\n            }\n        });\n    });\n})();\n","(() => {\n    const tabsBlocks = document.querySelectorAll('.js-tabs');\n\n    tabsBlocks.forEach((tabs) => {\n        const buttons = tabs.querySelectorAll('.js-tab-button');\n\n        buttons.forEach((button) => {\n            button.addEventListener('click', () => {\n                resetButtons();\n                button.classList.add('active');\n            });\n        });\n\n        function resetButtons() {\n            buttons.forEach((button) => {\n                button.classList.remove('active');\n            });\n        }\n    });\n})();\n"]}